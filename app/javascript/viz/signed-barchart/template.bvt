svg {
	width = 1000
	height = 1000
	Rows{
		XYPlot {
			x = 50 ; y = 50
			height = plotHeight
            width = plotWidth
			anchor = @anchor("left","top")
			data = barchartData
			dataHandler = {
				default: {
					value: d => d['Zscore'] > 0 ? d['Zscore'] : 0,
                    min: d => d['Zscore'] > 0 ? 0 : d['Zscore'] ,
					pos: d => d['Level'],
				}
			}
			valueRange = [bounds.lowerBound,bounds.upperBound]
			flip = true
			invertValueAxis = true
			discreteCategory = true
			Line {
				x1 = @scaled-x(0); y1 = 0; x2 = @scaled-x(0); y2 = 100%
				dashArray = [4,4]; stroke = "grey"
			}
            @for (d, i) in barchartData {
                Text {
                    text = d.Level
                    anchor = d.Zscore > 0 ? @anchor("r", "t") : @anchor("l","t")
                    x = @scaled-x(0)
                    y = (i/barchartData.length * 100)%
                }
            }
			Bars {
                :children (d) {
                    Rect.full {
                        fill = d.data.Zscore > 0 ? "green" : "red"                        
                        behavior:tooltip {content = `z-score: ${d.data.Zscore}` }
                    }
                }
                
            }
            Axis("bottom") {
                y = 100%
            }
		}
		
	}
}